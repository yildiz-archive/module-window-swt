sudo: required

language: generic

git:
  depth: false

dist:
  xenial

cache:
  directories:
    - $HOME/.m2

services:
  - docker

before_install:
  - docker pull moussavdb/build-java

env:
  global:
  - secure: MyaopFzSSGTomGhzbrA/foMt0CWg6jjaPv96zlhkKdLXmHnO94gZvsdmquVOSBl/r9F+KbeWn9T6qplM+saamO+wdqC9FInYXb3qgRBovg0Kqv1fsodDvTHhn4vqnfBLxM8HGkYoLiVJ/2VxCCqoGTwKGmSINV3uXapWti7zW3LRZvPSRDLwbjFCVlArDX8CnEgCLVzlCIDWj9EkM25DpnpAujS/2gUJ02Tx0/4qh1ivB1+9hYLHCRppuZyGxySmp+PmhU1AYqvJ8O9Guefjc0BqaDlBiLPAIcGKGhyTU+KObomGr/ZBudhtP7Qb/KRs3g12p4/Emouxn+ednG6fDZyWw8E8JP2ywZGl6o9EsFlnwhFBaybUpFAvy4xNjaOm8O1xsaanJyU5cehjbvJUopxBGVrpr6R7pl63h7gdFFzk5dxhnok2FtmxQZRac2jvKTy9ZeJAGi0hFlLp2XSE8/3f9Kl+E3OZILz6sBEqzS/RMoAaJLDy8pqHujcAGrE2JSVSNmhd6VKBJPf8bdQdQyZe3kqXJ+iUxeqVF5EBENTYgvRI/uc98ee8DYiPVpIUbKcMLNcbEhSzmkKLN/dnCFqKP1SGryDOPYuebYVBgiSulzsrHfLtgjghAP4uifAdziM2HQrjVaOvHnWO9AUj5G9cIYsdjFBw9c1Q66ohtXA=
  - secure: A6gWH8a0PqqYaMd4ZxOAH5oKDLHK1R4YCOJuXSjHaDCKvuF7EBJReyGj9v4CO/2wF/gk46qoYpqQ47nWMofEAHsmHwBTcBLFaHH+pf+FFsnvh0G4+vzd+IKTuJldj6CsNiAehHP9t6Fb3JyZRCliY+euolt9jnE9vTTb56Egj+naMPeBaK0i4tGvCdmQJA2CDsinMRIcs1VRuo1mb/xn7sfpnCKSFDBWxvqATZiJB8XPhY6kZV83mLrRTLh2JitBHkm87AWWqAINcGtA1vFeswmLwCDnK/u6II8QJy6gK6RTxt0HJTWKhnXs5z3n8UrbAVX9G2NKirrwmvpsbkKfh1vuebkd1OoL2VbHmnjlsar/v7dBVZGkWJ+Rk7RIIVzdvQXQeNIYw7b5tWLl9WFSbtjIqlDTkYo+FikCMj54NmVi6pnGKIaCxeYohTKLRhKaDuUd66XnDwk4iwj22vj28SJUZ+wgh7uiSDvbeqa7XhzCH1CIPEKJAI9qd1RIWbprtUe++j46Ac79hGwZPQqPlSSv05U0GArsZxnnfGAQYANxO/QkSkp0dT52FR40NFTQf3Rf0pGkOoARyQmDg9pX04vUBW1V1YmLANQRdlBhnBhRP/FSZE1KL/7beQYbaRNVbD/SrKICIEguxNOsnXDrLkZXbpVvP+zyupUo97oGMoM=
  - secure: ddwQw7E/mkVHusmrINf4oYJzTC5KVLo4LDc0Rln3vFYr+tXo1qNB/xJ70a6gzsBrucDd4CH2aCaIrfaMlMKHEg4ZSbbCot48+7eLCK9Bgi2gzm/N61lPfGAfqkedyY8Gyh89jZB36PLnUKrPHmx9c9fq8jVPJ4vQOogJ4LQNcTJV5tgCX+xgAG0hHX2gKmTnVWj6NOsInjFC6tpYuJz2/jAAE8O4Hu+bwuA3pkFUkG9aqbBDjJdvxiassLaIdZh3iZHmmQPapLv6WOu7rOePldTeV1Ppu6QLs0XFfaS3cHqYrQhaBex1ak0Zw9xGFKif/RTV48PGozrkl/1rbic02ell08WY3AIYo8xAPFSfJk5q41WZBV9wnY3IA+240ZwdqFNRxjOBcsCWNnxQou2jAMie/IVckKxpIwLsCSq2dYuGKfoRgPYaytUxXof9Na5S2BKuEWEVC65pcXtHMBjqSQJzZrtihX0Uf20rOn4jNeYrkwk5M3cX2GwHMYgBw5oceW0r2MrzrbLD2f1uQ0/W9Li61YtnCuyzEo8D2TzV9ObvNN9x/xQCaEMi0gm57vTvjwz9swcyApdwE1mfANoqhUHUartnH0dbcUOUdvrAk5EUv+3JqgfBsMM/PDF4aFA3p2K2X93qkLQ3USetEhnrqwHklVsGJ1rrymfbnMdz45A=
  - secure: r9rUJmZ1t2otIPJKEY8Ch6+XJKS1KiCRg43HK1s+m79K7GvNAmQuIfwapM1TxQ3hV2yi4OOpGYVezfJ6mP5xkZro1eQGr4/3KkzfYA7LZb89Y3TDkJPPK/C5JV5Uj0gfEy9oP4xZiEGsYDQ/muRSW5plKAQArWJJv+T+3LO3yFIoKs+4lQ3ba2G2nUAFHwvvoyBXPDXJoBslt9QSgjwQDo8sKvlp6O8JoPj6E40uoTSZiY3HSl34FRp8eG/90UqXPJ/6yU5aEo6mAzd5Jr789MHoSIAGJ15xy6j3pp6Ru27Ld9vCqQ109xVcEx4lpHKyXH/eFiQ/7ixu2iu5ELapf282TvN0/rnS5VAQKu/lsGxtdcxiEfFB0uvMnYb4F5gE8a4sblARxk+X4unzq/aYPMugT37sMDxgJmJ6q+nZh6s5hLsdXW1/Wfn/HGrHttla99LNrI9+m5/LkT+ufB36iIGdQZnAk7ZaRh5jH9DjbjM04nRC3holsgqYN7GXvfyVHVNxpD5vY5gRbWlKS2CvvKxpf3OPjGLyqcXPloF7nq7Mx7SuJ0pfA/QuKHRl3oXJsOPUtgL72XY6fklsL5MAp0AQiwvQTizwNUkwKwHYdQo1qdh+7zVxIkD1P6CaJjqUO4pV4YXkBhRg/JexzFAn6oISWlJo4G9GY+jIKP3RASI=
  - secure: gHQLBBgRt8LaHA3WwfyRPvduvqkTiWwQaW7xUz26kegoSv1nYkLblIyqmbLAn7GLHINxWwZ+VloHnk57ClQZIWwTvehkA0LSsP5to+ZCxVwZKqLIGRqwxJUmo3l6ZdX/hxdXj7Y2xOuhvp7j+cKZUFX/Z7WzZkBM/pd+1zW/G8RoC+zd4FlhlV1ofkOGWFHhQ3Uyc9pWLg05YQdcUzN+nPNzEUmubOnJcU/gpVse/SXZv2x/ByVG/foIJyqj1QwxLzsk12iuhy87/jtL5i+ZsLO9e77kQ2bwssvKu7Um7eiTHdMuGJGt3A3D8w6TshGydhMhl9C0EtNORajqTeN60jbSkGk4/aGxiLgN6HsW/aBs9gePzyJwAFL438trGZalHBUNULrX0HMEG4urqMEI2EmyeBcGTnETqrsyem6T9Pw9TyshAgH9/Xb1XsJWBHC8Ln+l9GQv/4yNtf64nxr3wzg0Adi5XZgP5usU88whCD6GAqlrn+JHk829mWDIQhXjF8/yZBqwyWZLHzbNXcJguLgNAEEHmZOPh/IlCo0bmdFWUdCQ/sUTRYlwK+Qf+0ykNs8VHNVlU/+A0wrvza4WtTylVmZkbdRvTDgnII5qKlle1BQZ2lV7di35qeCTBov/Sy1iKYFJfk9yHYoLWJvLGfmxqMrvd1i5MO3RlMwwFg8=
  - secure: zgMBk8YF9PXiLaP/z1ZxCYVKnpQHzRJySo3Pyn1ML/BcY8oGSsTpF7JHuKUPo2KwuzEM4jqKr2h+3woKSDDpemlfEnECf41glM9S2dazsoL+g/VL7S6iBuo0YjIVGivn5CQ0KgecIJ8uMs2DgU1agfojIWxYubWsQV3lFDcWBfY+rNXB3pM2iPYWdZP3NQfNOJIPmRt2qqpfz7z0jr/M8l23ksgwVEEupPfVNX/je9kDVLuUNv6tEmNxXsPVivAOPj+q68w1Q/sj4sZjlSQ0gorE1EJbnFXCHD5y4HMehapeG8j9cFjaOEZ/NgfcDWhT257U4b/B9obF+/GPjOqpF3nymk5cuRZy6q8Vt/8BlxtOnXhcL+gNKfGteK2TqeSU0sa/Dq01TvbWs1RiNv+R7AJkTS7yfgMt1bMYMdiyuk7+fKPlzJATUsZUd6UqinSY28ggYvnKeDYGMhp7RgSh0ceyGt9ilbr0Fd0G3AbpkXprHFm5Zc+bVF+frx/a+gZS+oY/rg7a7c3OYCwzDjmJ8Vt1HlGabDXt2Oe4yebNq0yFH3J87EPr194BE7pbij9m7KB2atuTnYAW2vkSV9b36fi7pu1UpvGssBpzOMdZyGa+CjZkY4Kkh9B9SmmASsL1hkuoBn0gxhKJIrnJxl7QmN9/lQ2ouvK46BdawCB2Sww=
  - secure: 0wLuKdzjpPRgqx2U8BCkrDZ3J3Wz1CJNCZaHyHuD50ucf46vTKcxyHjxFMMm8DlqwxDDHemGGypn55wZQsqZ9RYSaJWl2SdwhIt94k3kK/dNGjVKp8+NfOF9mwArbKcPYJIb/h/QdmLX0RsjOrXDwDVJk1aS1eceyQU6HqFoCDL2h5howqQl73jAuNsgWOy5uGj2VG61tnxrxuLOdjDdfLpO091X1OGX/ecBpf0VjJ+2npO6T2fcK9gck+k3PKOFluD/cUqYg/3o0mnOMMxru9PQ8jvVi7MKBrhGqW3pZCKjGqMKd3CFUf5HgiJ70JfBr4yg+RDMEOdbkZbVqDysTCjAAPqfCs0baiuUwmCrb1Z77FrmvwxDipn6wFRQphVlcOY/OHTBQHG9CzXpbOzUS3HN62TToLXldcikXzjVWGTlD27JKZoNXguk1Dch6lUyX3CF9SNEAeH3DeWW1Rth0yFLIAsNzcN0ystx0MAtK8HunAQBtOwTEY/022LpBqHUpZLB4fKq1897Q2pneLKtuAJdv9YRPq2IQkekiqWm5ptLabqT2t4KuIexH6T9z1t3aGyYXQ/6UeKW1GPYvLTxESqQNzzh5TKYNG2s20eQKtdrAbCSXbrleaPaWLdnBBd3D5BeylCSGQGxWJqxdRa5+92c3apEiKz7au5fYrcwToY=
  - secure: qMH1djiCHzGLc0zXhKj7Y3kdiQmpqKSD8U1KqBUGCOY2ibOr5fllBFLbyV0mWSFoq7FUqAr3BIMHUTKrg5PDkjE/tmLyQKvXzDT5MtYuIJAzQeQlL1C0s/NMBF9f8td26LoruezXiL3C7DNvF8C1EZF+XJeH7QPbyqwsvPla109o51hFF4Ma+q21oFTeo5pe1X7WLYld5meSC9G7Nyk+DKd6jZ3WLJeJgWCjxVYdAljXL9r338uwXIVhu5GBZUCuM7979B7lcMYc4ZNMrIkfkWpGsqb5TE/nCqXUa7XftpVgvd6L3BNXL+uKQX6aDp2xEGIcsIGDflqwfTmEbUVJ7ygOaW8FzQyfw9PcYQaQOejHN0vmeHI/2LDUHfSYD/NKN7Aj1vC9BdtbtrgCzuuZEDK4C/6DLgz3fvlkjFeeK4lptA8ByHGJHuLktmGn3QSPzUy+VV30ic9hMiPtl2Vz7N42qgz9IJ+8UyGh7yXsYjp5WdoxcrsghL4u7So1tGrpI5VVvoRZ34oUmzh89MORquD4OeiHW7zjAGEpj74gYJ7Igjio9tdlMBS9wdu5q7FW5Bys7SLnA3SwsTeRs1Ce9P3BeaxxCQXCTmliqw/RsDTJNFM5W5jLHT8HDl4gW9sHUNUP/ZdZwNjuduPu5zVXWTQavoQ7kGutKeyqFr+Ny0Q=
  - secure: PXos47inxnqwNcI4pO2qdusabM8LADqolKtNxQs3eHE3yy9XIZA05LtRlaNPcvyTCCkDLrWIWMoOSOWinXkvileCMuVVybYjoTuC7LA8d7Q9RvKfii2lltwDWxJ7B+Q9VSDzBaGGbtU7Nqd9lzaXnRKK0nrWQ7QGBQmGSF2+7wV9spQAzyS0P0MG9WsR6YvOBUdaTQWNiut8EBxBicfbRkl43WB7O40iehrb2mCOU64HBs3qiE47oK3UlF/BGyiftu18h3yVfc6Ce6reZ7Yji0kTbo9A7anSMu06Z+2DDoe4RfUMJaA6RBGbB8h17SqYheR6RmdKMgOpKY9mJiWkRfu25P+83bgmWqbKSQgdSVFuj7h8b6bpxax8pLLmFfLPAlBwEjm7BRY2DX7tAsEvmbthmZX+Nfgb9GSbh8jX1CYg/UJ7xnd49T4gXP0VMtvCvegFCCFuu3qVvzziddHkAcq9CT6jBHKpGCD8Xjwdtt1eObOruX7scuolARKGfCaFvRaJJxX4ksQPlOgw50n9t3LviBQPnTAr6T71t1XJ207ICYdC1IzTom0YZ/B7JkwrX68NnIU9UF8AsC49BeF/dt2x8ziGVmxOUFdJBa5n/f9wVDB9fAIeL3vNSih7fLtw4I2u/4jHvlPCXhlGxXwzSSwrF6fkaMwuaiuKog9+s54=

script:
  - chmod 777 deploy-maven-central.sh
  - docker run -v $PWD:/src -v $HOME/.m2:/root/.m2 -e REPO_USER=$REPO_USER -e REPO_PASSWORD=$REPO_PASSWORD -e BRANCH=$TRAVIS_BRANCH -e OPENSSL_PWD=$OPENSSL_PWD -e GPG_PWD=$GPG_PWD -e GPG_KEY=$GPG_KEY -e OSSRH_USER_TOKEN=$OSSRH_USER_TOKEN -e OSSRH_PWD_TOKEN=$OSSRH_PWD_TOKEN -e SONAR=$SONAR -e SONAR_ORGANIZATION=$SONAR_ORGANIZATION moussavdb/build-java ./deploy-maven-central.sh

after_success:
- npm install travis-ci
- node trigger-build.js
